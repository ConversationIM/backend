<html>
<head>
  <style>
    html {
      margin: 20px;
    }
    p {
      margin-top: 0px;
      margin-bottom: 0px;
    }
  </style>
</head>
<body>
  <h1>Status</h1>
  <p id="status">Connecting...</p>
  <p id="tip"></p>
  <script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/socket.io/0.9.16/socket.io.min.js"></script>
  <script type="text/javascript" charset="utf-8">
  	var statusElement = document.getElementById("status");
  	var tipElement = document.getElementById("tip");
  	try {
  		setTimeout(function(){ 
  			if (statusElement.innerHTML.toLowerCase() === 'connecting...') {
  				tipElement.innerHTML = "You might want to check your console for errors";
  			}
  		}, 3000);
  		
	    var socket = io.connect("http://localhost:5000/mvp");
	        socket.on('connect', function() {
	        	statusElement.innerHTML = "<p> - Connected to SocketIO namespace 'MVP'</p>";
	        });
	        socket.on('error', function(error) {
	        	statusElement.innerHTML += "<p style='color:red'> - Error: " + error + "</p>";
	        });
	        socket.on('joined', function(data) {
	        	statusElement.innerHTML += "<p> - Joined room '" + data['room'] + "'</p>"
	        });
	        
	        var token = "test_token_here";
	        socket.emit('join', JSON.stringify({'token': token, 'room': 'default'}));
	} catch (e) {
		statusElement.innerHTML = e;
	}
  </script>
</body>
</html>
